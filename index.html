<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JhƒÅkri ‚Äî Images MVP</title>
  <meta name="description" content="JhƒÅkri ‚Äì Upload images to generate protected output. Images-only MVP UI." />
  <meta name="theme-color" content="#b80d1c" />
  <style>
    :root {
      /* Light theme (default) */
      --bg: #ffffff;
      --surface: #ffffff;
      --surface-alt: #fafafa;
      --muted: #6b6b6b;
      --text: #111111;
      --text-dim: #333333;
      --border: #e6e6e6;
      --accent-500: #f43f5e;
      --accent-600: #e11d48;
      --accent-700: #b80d1c; /* brand primary */
      --accent-800: #8a0e16;
      --shadow-1: 0 6px 18px rgba(0,0,0,.08);
      --shadow-2: 0 6px 20px rgba(184,13,28,.15);
      --radius-lg: 12px;
      --radius-xl: 20px;
    }
    [data-theme="dark"] {
      --bg: #0f0f0f;
      --surface: #1a1a1a;
      --surface-alt: #222222;
      --muted: #bdbdbd;
      --text: #f5f5f5;
      --text-dim: #e2e2e2;
      --border: #2f2f2f;
      --shadow-1: 0 6px 18px rgba(0,0,0,.55);
      --shadow-2: 0 6px 20px rgba(184,13,28,.35);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; background: var(--bg); color: var(--text);
      font: 16px/1.55 "Inter", "Manrope", system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    }

    a { color: var(--accent-700); text-decoration: none; }
    a:hover { text-decoration: underline; }

    header.site { position: sticky; top: 0; z-index: 50; background: rgba(255,255,255,.8); backdrop-filter: saturate(1.2) blur(10px); border-bottom: 1px solid var(--border); }
    [data-theme="dark"] header.site { background: rgba(15,15,15,.85); }

    .brand { display:flex; align-items:center; gap:12px; }
    .logo { width:38px; height:38px; border-radius:10px; background: linear-gradient(145deg, var(--accent-800), var(--accent-700)); display:grid; place-items:center; color:#fff; font-weight:800; }
    .brand h1 { margin:0; font-size:22px; font-weight:800; }

    .container { max-width:1120px; margin:0 auto; padding:24px; }
    .hero { padding:48px 24px 12px; text-align:center; }
    .hero h2 { font-size: clamp(32px, 4vw, 46px); font-weight: 900; margin:0 0 10px; }
    .hero p { color: var(--text-dim); max-width: 760px; margin: 0 auto; }

    .card { background: var(--surface); border:1px solid var(--border); border-radius: var(--radius-xl); box-shadow: var(--shadow-1); padding:22px; }

    /* Two-column IO grid with consistent heights */
    .io-grid { display:grid; grid-template-columns: 1fr 1fr; gap: 28px; align-items: start; }
    @media (max-width: 980px){ .io-grid { grid-template-columns: 1fr; } }

    label { font-weight: 700; color: var(--text); display:block; margin-bottom:8px; }
    .hint { color: var(--muted); font-size: 12px; margin-top: 4px; font-weight: 500; }

    .file-btn { display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:10px; border:1px solid var(--border); background: var(--surface-alt); cursor:pointer; font-weight:700; }
    input[type="file"] { display:none; }
    .file-list { margin-top:10px; display:flex; flex-wrap:wrap; gap:8px; }
    .chip { background: var(--surface-alt); border:1px solid var(--border); padding:6px 10px; border-radius: 999px; font-size:12px; color: var(--text-dim); }

    .dropzone { border: 2px dashed var(--accent-700); border-radius: 12px; background: rgba(184,13,28,.06); padding: 18px; text-align:center; }
    .dropzone.dragover { background: rgba(184,13,28,.12); }

    .output-card { background: var(--surface); border:1px solid var(--border); border-radius: var(--radius-lg); padding:14px; min-height: 280px; display:flex; align-items:flex-start; }

    /* Grids for previews */
    .grid-preview { display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:12px; width:100%; }
    .thumb { border:1px solid var(--border); border-radius:10px; overflow:hidden; background: var(--surface); }
    .thumb img { width:100%; height:140px; object-fit:cover; display:block; }
    .thumb figcaption { padding:6px 8px; font-size:12px; color:var(--muted); border-top:1px solid var(--border); }

    .toolbar { display:flex; flex-wrap:wrap; gap:10px; margin-top:14px; align-items:center; }
    .btn { border:0; cursor:pointer; font-weight:800; padding:12px 16px; border-radius:12px; transition:.2s; }
    .btn.primary { background: linear-gradient(145deg, var(--accent-800), var(--accent-700)); color:#fff; box-shadow: var(--shadow-2); }
    .btn.secondary { background: var(--surface-alt); color: var(--text); border:1px solid var(--border); }
    .btn.ghost { background: transparent; color: var(--text-dim); border:1px dashed var(--border); }
    .btn:hover { filter: brightness(1.05); transform: translateY(-1px); }

    footer.site { margin-top: 48px; padding: 24px; color: var(--muted); border-top: 1px solid var(--border); text-align: center; font-size: 14px; }
  </style>
</head>
<body>
  <header class="site">
    <div class="container" style="padding-top:12px;padding-bottom:12px;display:flex;align-items:center;justify-content:space-between;">
      <div class="brand"><div class="logo">J·∏§</div><h1>JhƒÅkri</h1></div>
      <button class="btn secondary" id="themeToggle" title="Toggle dark mode">Dark mode</button>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h2>Harden your images against AI replication</h2>
      <p>Upload images and JhƒÅkri will return a protected version. (MVP ‚Äî images only)</p>
    </section>

    <section class="card" aria-labelledby="modeLabel">
      <div class="io-grid">
        <!-- Left: Input -->
        <div>
          <label>Upload images</label>
          <div id="img-drop" class="dropzone" tabindex="0" aria-label="Drop images here or choose files">
            <p style="margin:4px 0 8px">Drag & drop images here</p>
            <label class="file-btn" for="image-file">üñºÔ∏è Choose images</label>
            <input id="image-file" type="file" accept="image/*" multiple />
          </div>
          <div class="file-list" id="image-files"></div>
          <div class="grid-preview" id="image-preview" aria-live="polite"></div>
        </div>

        <!-- Right: Output -->
        <div>
          <label for="output-images">Output</label>
          <div class="output-card" id="output-card-images">
            <div id="output-images" class="grid-preview"></div>
          </div>
          <div class="toolbar">
            <button class="btn primary" id="processBtnImg">Generate Anti‚ÄëAI Output</button>
            <button class="btn secondary" id="downloadBtnImg">Download</button>
            <button class="btn ghost" id="clearBtnImg">Clear</button>
          </div>
          <div class="status" id="status-img" aria-live="polite"></div>
        </div>
      </div>
    </section>
  </main>

  <footer class="site">
    <small>Owned and operated by <a href="https://northbridgeit.ca/" target="_blank" rel="noopener">NorthBridge IT Solutions</a>.</small>
  </footer>

  <script>
    const $ = (sel, ctx=document) => ctx.querySelector(sel);

    // Theme toggle
    const themeBtn = $('#themeToggle');
    themeBtn.addEventListener('click', () => {
      const root = document.documentElement;
      const dark = root.getAttribute('data-theme') === 'dark';
      root.setAttribute('data-theme', dark ? 'light' : 'dark');
      themeBtn.textContent = dark ? 'Dark mode' : 'Light mode';
    });

    // IMAGE panel logic
    let imageFiles = [];
    const imageList = $('#image-files');
    const imagePreview = $('#image-preview');
    const outputImgsWrap = $('#output-images');
    const statusImg = $('#status-img');

    function addChips(files){
      imageList.innerHTML='';
      files.forEach(f=>{
        const s=document.createElement('span');
        s.className='chip';
        s.textContent=`${f.name} ‚Ä¢ ${(f.size/1024).toFixed(1)} KB`;
        imageList.appendChild(s);
      });
    }

    function renderPreview(container, files){
      container.innerHTML='';
      files.forEach(file=>{
        const fig=document.createElement('figure');
        fig.className='thumb';
        const img=document.createElement('img');
        const cap=document.createElement('figcaption');
        cap.textContent=file.name;
        const fr=new FileReader();
        fr.onload=e=> img.src=e.target.result;
        fr.readAsDataURL(file);
        fig.appendChild(img);
        fig.appendChild(cap);
        container.appendChild(fig);
      });
    }

    // File input
    $('#image-file').addEventListener('change', (e)=>{
      const files=Array.from(e.target.files||[]);
      imageFiles = imageFiles.concat(files);
      addChips(imageFiles);
      renderPreview(imagePreview, imageFiles);
    });

    // Drag & drop
    const drop = $('#img-drop');
    ['dragenter','dragover'].forEach(evt=> drop.addEventListener(evt, (e)=>{ e.preventDefault(); e.stopPropagation(); drop.classList.add('dragover'); }));
    ;['dragleave','drop'].forEach(evt=> drop.addEventListener(evt, (e)=>{ e.preventDefault(); e.stopPropagation(); drop.classList.remove('dragover'); }));
    drop.addEventListener('drop', (e)=>{
      const files=Array.from(e.dataTransfer.files||[]).filter(f=>f.type.startsWith('image/'));
      imageFiles = imageFiles.concat(files);
      addChips(imageFiles);
      renderPreview(imagePreview, imageFiles);
    });

    // PROCESS (placeholder: currently just mirrors input to output)
    $('#processBtnImg').addEventListener('click', async ()=>{
      statusImg.textContent = 'Processing‚Ä¶';
      await new Promise(r=>setTimeout(r,300));
      outputImgsWrap.innerHTML='';
      if(!imageFiles.length){ outputImgsWrap.textContent='[No images provided]'; statusImg.textContent=''; return; }
      imageFiles.forEach(file=>{
        const fr=new FileReader();
        fr.onload=e=>{
          const img=new Image();
          img.src=e.target.result;
          img.style.width='100%';
          img.style.height='140px';
          img.style.objectFit='cover';
          const cell=document.createElement('figure');
          cell.className='thumb';
          cell.appendChild(img);
          outputImgsWrap.appendChild(cell);
        };
        fr.readAsDataURL(file);
      });
      statusImg.textContent = 'Done.';
    });

    // DOWNLOAD original (placeholder ‚Äî later replace with processed download URLs from backend)
    $('#downloadBtnImg').addEventListener('click', ()=>{
      if(!imageFiles.length) return;
      imageFiles.forEach((file,i)=>{
        const url=URL.createObjectURL(file);
        const a=document.createElement('a');
        a.href=url; a.download=file.name||`jhakri-image-${i+1}`;
        document.body.appendChild(a); a.click(); a.remove();
        setTimeout(()=>URL.revokeObjectURL(url), 800);
      });
    });

    // CLEAR
    $('#clearBtnImg').addEventListener('click', ()=>{
      imageFiles=[]; imageList.innerHTML=''; imagePreview.innerHTML=''; outputImgsWrap.innerHTML=''; statusImg.textContent='';
      const input = document.getElementById('image-file');
      if (input) input.value = '';
    });
  </script>
</body>
</html>
